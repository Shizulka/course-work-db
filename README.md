# Документація проєкту

## Технічне

**Мова програмування:**
Python

**Framework:**

_FastAPI_ - маршрутизацію запитів та обробку HTTP-методів.

_Pytest_ - для тестів

**Бібліотеки:**

_Pydantic_- Для валідації та трансформації данних. Використовувалося у `schemas.py.`

**Сервер:**

_Uvicorn_ - необхідний для запуску FastAPI-додатку.

_Railway_ - використовується для хостингу та розгортання бази даних у мережі.

**Емейли:**

_email.mime та smtplib_ - для відправки сповіщень користувачам через емейл.

**База данниз:**

_PostgreSQL_ -для зберігання зв'язків між читачами та книгами.

_SQLAlchemy_ - для об'єктно-орієнтованої роботи з базою даних.

_psycopg2_ - для забезпечення технічного з'єднання між Python-кодом та сервером PostgreSQL.

**Інше:**

_Swagger UI_ - для візуалізації ендпоінтів API та тестувати їх прямо у браузері без написання фронтенду.

_Apscheduler_- для виконання фонових процесів за розкладом. Використовується в `scheduler.py`

_python-dotenv_- для .env файлу де ми зберігаємо доступ до пошти та бази данних.

## Архітектура

```
src/
├── database.py                    # Підключення до БД (SessionLocal)
├── main.py                        # Точка входу, запуск Scheduler
├── models.py                      # Опис таблиць (SQLAlchemy models)
├── scheduler.py                   # Налаштування фонових задач
├── schemas.py                     # Pydantic схеми (валідація)
├── .env                           # Паролі  почти та бази данних
├── routers/                       # Обробка HTTP запитів (Controller layer)
│   ├── books.py
│   └── patrons.py
└── services/                      # Бізнес-логіка (Service layer)
    ├── book_service.py
    └── patron_service.py
    repositories/                  # Шар доступу до даних
    ├── ult_repository.py          # Батьковий класс для всіх репо
    └── relations_repository.py    # Батьковий класс для таблиць багто до батьох

```

## ER діаграма проєкту

потім вставлю

## Опис API Ендпоінтів

### Books

**POST /books/** - Додавання нової книги

**GET /books/** - Перегляд всіх книг

**PATCH /books/update** - Оновлення книги

**POST /books/batch** - Створення нової книги разом з кількістю авторами та жанрами

**POST /books/delete** - Видалення книги

### Patrons

**POST /patrons/** - Додавання нового патрону

**POST /patrons/soft_delete** - "М'яке" видалення патрона з системи , з шансом повернутися назад через 6 місяців , якщо ні видаляється патрон повністю

**POST/patrons/activate** - Відновлення аккаунта патрону після м'якого видалення

### Checkout

**PUT/checkout/renew** - Поновлення дедлайну здачі книгі

**POST/checkout/borrow** - Взяття книгі

**POST/checkout/return** - Повернення книгі

**POST/checkout/lost_book** - Звіт про втрату книгі + штраф

**GET/checkout/** - Показ свіх позик книг

### Waitlist

**POST/waitlist/** - Додавання черги на книгу

**POST/waitlist/issue** - Взяття книги з чергі очікування

**GET/waitlist/position** - Показ позиції в черзі

### Book-Copy

**POST/book-copy/update** - Зміна загальної кількості книг

**POST/book-copy/** - Додавання кількості книг

**GET/book-copy/** - Показ всіх наявних копій

### Author

**POST/author/** - Створення автора

### Genre

**POST/genre/** - Створення жанру

### Wishlist

**POST/wishlist/** - Створення бажаної книги

**GET/wishlist/** - Перегляд бажань

### Relations

**POST/relations/author-book** - Створення зв'язків між автор та книгой

**POST/relations/genre-book** - Створення зв'язків між жанром і книгой

### Notification

**GET/notification/{patron_id}** - СПерегляд сповіщенням у одного патрона

**GET/notification/** - Перегляд сповіщеннь всіх

### 11.12.2025

Почали документацію,
запихнули міграції,
зробили models.py.

### 12.12.2025

Початок роботи над бекендом, змогли додати book, patron та checkout через пайтон.

### 13.12.2025

Так... copy_book, waitlist є. Переробили репрезиторії тепер все зберігається в одному. Зробили checkout і зробили так, щоб у copy_book віднімалася кількість доступних примірників, і коли вона дорівнюватиме 0 можна вже створювати вейтліст.

### 14.12.2025

Додали Notification , зв'язок автор\жанр до книг, вішліст, зробили повернення книги (так, ми тільки зараз зрозуміли, що в нас не було цього ;-;)

### 15.12.2025

Додали комплексний сценарій створення сутності "Видача книги з черги очікування".

СПОВІЩЕННЯ НА ЕМЕЙЛ ПРИХОДЯТЬ ВИ ШО
<img width="789" height="272" alt="image" src="https://github.com/user-attachments/assets/d50f2788-2284-4517-9101-bb0ad1679f06" />

### 16.12.2025

Зробили сотий коміт

[Ми ніколи вас не підведемо](https://youtu.be/dQw4w9WgXcQ)
